import{m as e,o as a,Q as l,r as t,L as s,c as n,d as r,e as u,g as i,n as d,l as o,w as p,v as m,u as c,p as b,t as f,F as y,y as v,b as h}from"./index-BJ15wZ4C.js";import{_ as x}from"./breadcrumbs-BALUYgVq.js";const N={class:"w-full"},w={key:0,class:"text-red-500 mt-2"},V={key:0,class:"text-red-500 mt-2"},g={key:1,class:"label",for:"emailVerify"},k={key:2,class:"flex flex-nowrap justify-between"},U=["disabled"],q={key:0,class:"loading loading-spinner"},T={key:1},z={key:2},A={key:3,class:"text-green-900"},Z={key:0,class:"text-red-500 mt-2"},$={key:1,class:"label",for:"phoneNumberVerify"},j={key:2,class:"flex flex-nowrap justify-between"},C=["disabled"],I={key:0,class:"loading loading-spinner"},_={key:1},E={key:2},S={key:3,class:"text-green-900"},D={__name:"userEdit",setup(D){const F=e({id:"",name:"",email:"",emailVerify:"",userName:"",password:"",uniformNumber:"",issueDate:"",issueStatus:"",birthday:"",phoneNumber:"",phoneNumberVerify:"",career:"",residence:"",agreeTerms1:!0,agreeTerms2:!0}),G=e({id:"",name:"",email:"",emailVerify:"",userName:"",password:"",uniformNumber:"",birthday:"",phoneNumber:"",phoneNumberVerify:"",agreeTerms1:!0,agreeTerms2:!0});a((()=>{l.getUser().then((e=>{F.id=e.data.id,F.name=e.data.name,F.email=e.data.email,F.userName=e.data.userName,F.uniformNumber=e.data.uniformNumber,F.birthday=e.data.birthday.split("T")[0],F.phoneNumber=e.data.phoneNumber,G.id=e.data.id,G.name=e.data.name,G.email=e.data.email,G.userName=e.data.userName,G.uniformNumber=e.data.uniformNumber,G.birthday=e.data.birthday.split("T")[0],G.phoneNumber=e.data.phoneNumber}))}));const L=t(!1),P=t(!1);s((()=>G.email),(e=>{e!==F.email?L.value=!0:L.value=!1})),s((()=>G.phoneNumber),(e=>{e!==F.phoneNumber?P.value=!0:P.value=!1}));const Q=t(!1),B=t("確認"),H=e({content:""}),J=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,K=n((()=>J.test(G.email))),M=/^09\d{8}$/,O=n((()=>M.test(G.phoneNumber))),R=/^(?=.*[A-Z])(?=.*[a-z])(?=.*\d)(?=.*[!@#$%^&*(),.?":{}|<>]).{12,30}$/,W=n((()=>R.test(G.password))),X=/^[A-Za-z][12]\d{8}$/;function Y(){l.updateUser(G).then((e=>{200===e.status&&(H.content="修改成功!",Q.value=!0)})).catch((e=>{H.content=e.response.data,Q.value=!0}))}n((()=>X.test(G.uniformNumber)));const ee=t(!1);function ae(){G.email?K.value?(console.log("發送驗證碼中..."),ee.value=!0,l.getEmailVerifyCode(G.email).then((e=>{ee.value=!1,console.log("驗證碼發送成功。")})).catch((e=>{ee.value=!1,console.log("驗證碼發送失敗。")})),function(){if(re.value)return;re.value=!0,ue=setInterval((()=>{ne.value>0?ne.value--:(clearInterval(ue),re.value=!1,ne.value=60)}),1e3)}()):alert("請輸入有效的信箱地址"):alert("請輸入聯絡信箱")}const le=t(!1);function te(){G.phoneNumber?O.value?(console.log("發送驗證碼中..."),le.value=!0,l.getPhoneVerifyCode(G.phoneNumber).then((e=>{le.value=!1,console.log("驗證碼發送成功。")})).catch((e=>{le.value=!1,console.log("驗證碼發送失敗。")})),function(){if(de.value)return;de.value=!0,oe=setInterval((()=>{ie.value>0?ie.value--:(clearInterval(oe),de.value=!1,ie.value=60)}),1e3)}()):alert("請輸入有效的聯絡電話"):alert("請輸入聯絡電話")}function se(){}const ne=t(60),re=t(!1);let ue=null;const ie=t(60),de=t(!1);let oe=null;return(e,a)=>{const l=x,t=v;return h(),r(y,null,[u(l,{breadcrumbs:["基本資料修改"]}),a[25]||(a[25]=i("h1",{class:"title-1"},"基本資料修改",-1)),i("div",N,[i("form",{class:"md:w-2/3 m-auto space-y-4",onSubmit:d(Y,["prevent"])},[i("div",null,[a[12]||(a[12]=i("label",{class:"label",for:"userName"},[i("span",{class:"label-text"},[o("帳號"),i("span",{class:"text-red-500"},"*")])],-1)),p(i("input",{id:"uesrname",type:"text","onUpdate:modelValue":a[0]||(a[0]=e=>G.userName=e),placeholder:"輸入帳號",class:"input input-bordered w-full",required:""},null,512),[[m,G.userName]])]),i("div",null,[a[13]||(a[13]=i("label",{class:"label",for:"password"},[i("span",{class:"label-text"},"密碼")],-1)),p(i("input",{id:"password",type:"password","onUpdate:modelValue":a[1]||(a[1]=e=>G.password=e),placeholder:"********",class:"input input-bordered w-full"},null,512),[[m,G.password]]),a[14]||(a[14]=i("span",{class:"text-xs text-gray-500 mt-1"},"請輸入12-30個字元，內容須包含英文大寫、英文小寫、數字及符號4種類型字元。",-1)),!c(W)&&G.password?(h(),r("div",w," 請輸入有效的密碼 ")):b("",!0)]),i("div",null,[a[15]||(a[15]=i("label",{class:"label",for:"uniformNumber"},[i("span",{class:"label-text"},"身分證字號")],-1)),p(i("input",{id:"uniformNumber",type:"text","onUpdate:modelValue":a[2]||(a[2]=e=>G.uniformNumber=e),placeholder:"輸入身分證字號",class:"input input-bordered w-full",disabled:""},null,512),[[m,G.uniformNumber]])]),i("div",null,[a[16]||(a[16]=i("label",{class:"label",for:"birthday"},[i("span",{class:"label-text"},[o("生日"),i("span",{class:"text-red-500"},"*")])],-1)),p(i("input",{id:"birthday",type:"date","onUpdate:modelValue":a[3]||(a[3]=e=>G.birthday=e),class:"input input-bordered w-full",required:"",disabled:""},null,512),[[m,G.birthday]])]),i("div",null,[a[17]||(a[17]=i("label",{class:"label",for:"name"},[i("span",{class:"label-text"},[o("姓名"),i("span",{class:"text-red-500"},"*")])],-1)),p(i("input",{id:"name",type:"text","onUpdate:modelValue":a[4]||(a[4]=e=>G.name=e),placeholder:"輸入姓名",class:"input input-bordered w-full",required:""},null,512),[[m,G.name]])]),i("div",null,[a[19]||(a[19]=i("label",{class:"label",for:"email"},[i("span",{class:"label-text"},[o("信箱"),i("span",{class:"text-red-500"},"*")])],-1)),p(i("input",{id:"email",type:"email","onUpdate:modelValue":a[5]||(a[5]=e=>G.email=e),placeholder:"輸入信箱",class:"input input-bordered w-full",required:""},null,512),[[m,G.email]]),c(K)?b("",!0):(h(),r("div",V," 請輸入有效的信箱地址 ")),c(L)?(h(),r("label",g,a[18]||(a[18]=[i("span",{class:"label-text"},[o("驗證碼"),i("span",{class:"text-red-500"},"*")],-1)]))):b("",!0),c(L)?(h(),r("div",k,[p(i("input",{id:"emailVerify",type:"text","onUpdate:modelValue":a[6]||(a[6]=e=>G.emailVerify=e),placeholder:"請輸入驗證碼",class:"input input-bordered w-full mr-4",required:""},null,512),[[m,G.emailVerify]]),i("button",{onClick:d(ae,["prevent"]),type:"button",class:"btn btn-primary w-auto",disabled:c(re)||c(ee)},[c(ee)?(h(),r("span",q)):c(re)?(h(),r("span",T,f(c(ne))+" 秒後可重新傳送",1)):(h(),r("span",z,"取得驗證碼"))],8,U)])):G.email?(h(),r("div",A,"✔ 驗證成功")):b("",!0)]),i("div",null,[a[21]||(a[21]=i("label",{class:"label",for:"phone"},[i("span",{class:"label-text"},[o("電話"),i("span",{class:"text-red-500"},"*")])],-1)),p(i("input",{id:"phone",type:"phone","onUpdate:modelValue":a[7]||(a[7]=e=>G.phoneNumber=e),placeholder:"輸入手機號碼",class:"input input-bordered w-full",required:""},null,512),[[m,G.phoneNumber]]),c(O)?b("",!0):(h(),r("div",Z," 請輸入有效的手機門號 ")),c(P)?(h(),r("label",$,a[20]||(a[20]=[i("span",{class:"label-text"},[o("驗證碼"),i("span",{class:"text-red-500"},"*")],-1)]))):b("",!0),c(P)?(h(),r("div",j,[p(i("input",{id:"phoneNumberVerify",type:"text","onUpdate:modelValue":a[8]||(a[8]=e=>G.phoneNumberVerify=e),placeholder:"請輸入驗證碼",class:"input input-bordered w-full mr-4",required:""},null,512),[[m,G.phoneNumberVerify]]),i("button",{onClick:d(te,["prevent"]),type:"button",class:"btn btn-primary w-auto",disabled:c(de)||c(le)},[c(le)?(h(),r("span",I)):c(de)?(h(),r("span",_,f(c(ie))+" 秒後可重新傳送",1)):(h(),r("span",E,"取得驗證碼"))],8,C)])):(h(),r("div",S,"✔ 驗證成功"))]),i("div",null,[a[22]||(a[22]=i("label",{class:"label",for:"career"},[i("span",{class:"label-text"},[o("職業"),i("span",{class:"text-red-500"},"*")])],-1)),p(i("input",{id:"career",type:"text","onUpdate:modelValue":a[9]||(a[9]=e=>G.career=e),placeholder:"輸入職業",class:"input input-bordered w-full",required:""},null,512),[[m,G.career]])]),i("div",null,[a[23]||(a[23]=i("label",{class:"label",for:"residence"},[i("span",{class:"label-text"},[o("居住縣市"),i("span",{class:"text-red-500"},"*")])],-1)),p(i("input",{id:"residence",type:"text","onUpdate:modelValue":a[10]||(a[10]=e=>G.residence=e),placeholder:"居住縣市",class:"input input-bordered w-full",required:""},null,512),[[m,G.residence]])]),a[24]||(a[24]=i("button",{type:"submit",class:"btn btn-primary w-full p-3"},"送出",-1))],32)]),u(t,{isVisible:c(Q),content:H.content,goToName:c(B),"onUpdate:visible":a[11]||(a[11]=e=>Q.value=e),onGoTo:se},null,8,["isVisible","content","goToName"])],64)}}};export{D as default};
